<div class="entity-dashboard-container p-6 max-w-7xl mx-auto">
  <!-- Dashboard Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">My Entities Dashboard</h1>
    <p class="text-gray-600">Manage entities owned by your wallet</p>
  </div>

  <!-- Wallet Info -->
  <div
    *ngIf="isAuthenticated"
    class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"
  >
    <div class="flex items-center gap-2">
      <svg
        class="h-5 w-5 text-blue-600"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
        ></path>
      </svg>
      <span class="text-sm font-medium text-blue-900">Connected Wallet:</span>
      <code class="text-sm text-blue-700 bg-blue-100 px-2 py-1 rounded">{{
        truncateAddress(walletAddress)
      }}</code>
    </div>
  </div>

  <!-- Not Authenticated State -->
  <div
    *ngIf="!isAuthenticated"
    class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"
  >
    <svg
      class="mx-auto h-12 w-12 text-yellow-600"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
      ></path>
    </svg>
    <h3 class="mt-4 text-lg font-semibold text-gray-900">
      Wallet Authentication Required
    </h3>
    <p class="mt-2 text-gray-600">
      Please connect your MultiversX wallet to view your entities
    </p>
    <button
      class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200"
    >
      Connect Wallet
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-12">
    <div
      class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"
    ></div>
    <p class="mt-4 text-gray-600">Loading your entities...</p>
  </div>

  <!-- Error Message -->
  <div
    *ngIf="errorMessage && !isLoading"
    class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6"
  >
    {{ errorMessage }}
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="isAuthenticated && !isLoading && !errorMessage">
    <!-- Stats Card -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Total Entities</p>
          <p class="text-3xl font-bold text-gray-900">{{ totalCount }}</p>
        </div>
        <div class="bg-blue-100 rounded-full p-3">
          <svg
            class="h-8 w-8 text-blue-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
            ></path>
          </svg>
        </div>
      </div>
    </div>

    <!-- Action Bar -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-xl font-semibold text-gray-900">Your Entities</h2>
      <button
        class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 flex items-center gap-2"
      >
        <svg
          class="h-5 w-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 4v16m8-8H4"
          ></path>
        </svg>
        Register New Entity
      </button>
    </div>

    <!-- Entities List -->
    <div class="space-y-4">
      <div
        *ngFor="let entity of entities"
        class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 p-6 border border-gray-200"
      >
        <div class="flex items-start justify-between">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-3">
              <h3 class="text-lg font-semibold text-gray-900">
                {{ entity.name }}
              </h3>
              <span
                [class]="getStatusBadgeClass(entity.stare_fiscala)"
                class="px-2 py-1 text-xs font-medium rounded-full"
              >
                {{ entity.stare_fiscala }}
              </span>
            </div>

            <div class="grid grid-cols-2 gap-4 text-sm text-gray-600">
              <div>
                <p class="font-medium text-gray-700">Entity Type</p>
                <p>{{ getEntityTypeLabel(entity.entity_type) }}</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">Created</p>
                <p>{{ entity.created_at | date : "medium" }}</p>
              </div>
              <div>
                <p class="font-medium text-gray-700">UUID</p>
                <p class="font-mono text-xs">{{ entity.uuid }}</p>
              </div>
            </div>
          </div>

          <div class="ml-6 flex flex-col gap-2">
            <button
              class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 text-sm font-medium"
            >
              Edit
            </button>
            <button
              class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors duration-200 text-sm font-medium"
            >
              View Details
            </button>
          </div>
        </div>
      </div>

      <!-- No Entities State -->
      <div
        *ngIf="entities.length === 0"
        class="text-center py-16 bg-gray-50 rounded-lg"
      >
        <svg
          class="mx-auto h-16 w-16 text-gray-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
          ></path>
        </svg>
        <h3 class="mt-4 text-lg font-semibold text-gray-900">
          No entities yet
        </h3>
        <p class="mt-2 text-gray-600">
          Get started by registering your first entity
        </p>
        <button
          class="mt-4 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200"
        >
          Register Entity
        </button>
      </div>
    </div>
  </div>
</div>
